(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{18:function(e,t,n){e.exports=n(40)},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(17),s=n.n(o),c=n(2),u=n(4),l=function(e){var t=e.searchName,n=e.handler;return r.a.createElement("p",null,"Filter: ",r.a.createElement("input",{value:t,onChange:n}))},i=n(7),m=n(3),d=n.n(m),b=function(e){console.log("Uploading ".concat(e.name,"...")),d.a.post("".concat("/api","/persons"),e).then((function(e){return console.log("Uploaded ".concat(e.data.name))}))},p=function(e){return console.log("Deleting ".concat(e,"...")),d.a.delete("".concat("/api","/persons/").concat(e))},f=function(e,t){return d.a.put("".concat("/api","/persons/").concat(e),t)},g=function(){return d.a.get("".concat("/api","/persons")).then((function(e){return e.data}))},h=function(e){var t=e.existingPerson,n=e.newPerson,a=e.states,r=e.stateSetters,o=e.existingPersonIndex,s=Object(i.a)(Object(i.a)({},t),{},{number:n.number}),u=a.persons,l=r.setStatus,m=r.setPersons;f(t.id,s).then((function(e){console.log("".concat(e.data.name,"'s number updated"));var t=Object(c.a)(u);t.splice(o,1),m(t.concat(e.data)),l({statusText:"".concat(e.data.name,"'s number updated"),statusType:"success"})})).catch((function(e){console.log(e.data),l({statusText:"".concat(s.name," has been removed from the server."),statusType:"failure"})}))},v=function(e){var t=e.states,n=e.stateSetters,a=e.newTextHandler,o=t.newName,s=t.newNumber,c=t.persons,u=n.setNewName,l=n.setNewNumber,i=n.setPersons,m=n.setStatus,d=a("Name",u),p=a("Number",l);return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a={name:o,number:s},r=c.findIndex((function(e){return e.name===a.name})),d=c[r];console.log(d),d?(window.confirm("".concat(a.name," already exists in phonebook, would you like to update number from \n            ").concat(d.number," to ").concat(a.number,"? "))&&h({existingPerson:d,newPerson:a,states:t,stateSetters:n,existingPersonIndex:r}),u(""),l("")):""===a.name?window.alert("Name cannot be empty"):(i(c.concat(a)),b(a),m({statusText:"Added ".concat(a.name),statusType:"success"}),u(""),l(""))}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:o,onChange:d}),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:s,onChange:p}))),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))),r.a.createElement("div",null,"debug: ",o))},E=function(e){var t=e.name,n=e.states,a=e.stateSetters,o=n.persons,s=a.setPersons;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{value:t,onClick:function(e){var t=e.target;if(window.confirm("Confirm delete ".concat(t.value,"?"))){var n=Object(c.a)(o),a=n.splice(n.findIndex((function(e){return e.name===t.value})),1)[0].id;p(a).then((function(e){console.log("Deleted ".concat(e.name)),s(n)}))}}},"delete"))},S={success:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},failure:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}},w=function(e){return S[e]},N=function(e){var t=e.status,n=e.setStatus,a=t.statusText,o=t.statusType;return a?(setTimeout((function(){return n({})}),5e3),r.a.createElement("div",{style:w(o)},a)):null},j=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],o=t[1],s=Object(a.useState)(""),i=Object(u.a)(s,2),m=i[0],d=i[1],b=Object(a.useState)(""),p=Object(u.a)(b,2),f=p[0],h=p[1],S=Object(a.useState)([]),w=Object(u.a)(S,2),j=w[0],x=w[1],O=Object(a.useState)({}),y=Object(u.a)(O,2),k=y[0],P=y[1],T={newName:n,newNumber:m,searchName:f,persons:j,status:k},C={setNewName:o,setNewNumber:d,setSearchName:h,setPersons:x,setStatus:P},I=function(e,t){return function(n){var a=n.target.value;console.log(e," ",a),t(a)}},U=I("Search Name",h);Object(a.useEffect)((function(){g().then((function(e){return x(e)}))}),[k]);var B=Object(c.a)(j);if(""!==f){var D=f.toUpperCase();console.log("Searching term: ",D),console.log(j[0].name.toUpperCase().startsWith(D)),B=B.filter((function(e){return e.name.toUpperCase().startsWith(D)}))}return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(N,{status:k,setStatus:P}),r.a.createElement(l,{searchName:f,handler:U}),r.a.createElement("h2",null,"Add a new"),r.a.createElement(v,{states:T,stateSetters:C,newTextHandler:I}),r.a.createElement("h2",null,"Numbers"),B.map((function(e){return r.a.createElement("div",{key:e.name},e.name," ",e.number,r.a.createElement(E,{name:e.name,states:T,stateSetters:C}),r.a.createElement("br",null))})))};s.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.315a22c4.chunk.js.map