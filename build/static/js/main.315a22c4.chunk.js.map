{"version":3,"sources":["components/Filter.js","services/jsonServerRequests.js","components/AddNew.js","components/DeletePerson.js","components/StatusMessage.js","App.js","index.js"],"names":["Filter","searchName","handler","value","onChange","newPerson","console","log","name","axios","post","then","response","data","personID","delete","newPersonDetails","put","get","updateNumber","existingPerson","states","stateSetters","existingPersonIndex","updatedPerson","number","persons","setStatus","setPersons","service","id","personsUpdated","splice","concat","statusText","statusType","catch","AddNew","newTextHandler","newName","newNumber","setNewName","setNewNumber","newNameHandler","newNumberHandler","onSubmit","event","preventDefault","findIndex","person","window","confirm","alert","type","DeletePersonButton","onClick","target","newPersons","statusStyles","success","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","failure","statusStyleSelector","StatusMessage","status","setTimeout","style","App","useState","setSearchName","inputName","setter","newValue","searchHandler","useEffect","jsonServerRequests","resp","filteredPersons","searchString","toUpperCase","startsWith","filter","map","key","DeletePerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.315a22c4.chunk.js","sourcesContent":["import React from 'react'\n\nconst Filter = ({searchName, handler}) =>{\n\n    return (\n    <p>Filter: <input\n    value={searchName}\n    onChange={handler}\n    />\n    </p>\n    )\n}\n\nexport default Filter","import axios from 'axios'\n\nconst restURL = '/api';\n\nconst uploadNewPerson = newPerson =>{\n    console.log(`Uploading ${newPerson.name}...`)\n    axios\n      .post(`${restURL}/persons`,newPerson)\n      .then(response => console.log(`Uploaded ${response.data.name}`)\n      )\n    \n  }\n\nconst deletePerson = personID => {\n  console.log(`Deleting ${personID}...`)\n  return axios\n  .delete(`${restURL}/persons/${personID}`)\n  \n}\n\nconst replaceNumber = (personID, newPersonDetails) => {\n  return axios\n    .put(`${restURL}/persons/${personID}`,newPersonDetails)\n    \n}\n\nconst getPersons = () => {\n  return axios\n  .get(`${restURL}/persons`)\n  .then(response => response.data)\n}\nexport default { uploadNewPerson, deletePerson, replaceNumber, getPersons}","\nimport React from 'react'\nimport service from '../services/jsonServerRequests'\n\nconst AddNew = ({states,stateSetters,newTextHandler}) =>{\n\n    const { newName, newNumber, persons} = states\n    const { setNewName, setNewNumber, setPersons, setStatus } = stateSetters\n    const newNameHandler = newTextHandler(\"Name\",setNewName)\n    const newNumberHandler = newTextHandler(\"Number\",setNewNumber)\n\n    const addPerson = (event) => {\n        event.preventDefault()\n        const newPerson ={\n          name: newName,\n          number: newNumber\n        }\n        const existingPersonIndex = persons.findIndex(person => person.name === newPerson.name)\n        const existingPerson = persons[existingPersonIndex]\n        console.log(existingPerson)\n        if (existingPerson) {\n          if(window.confirm(\n            `${newPerson.name} already exists in phonebook, would you like to update number from \n            ${existingPerson.number} to ${newPerson.number}? `)\n            ){\n              updateNumber({existingPerson,newPerson,states,stateSetters,existingPersonIndex})\n              // window.alert(`FUNCTION NOT IMPLEMENTED`)\n            }\n          setNewName('')\n          setNewNumber('')\n        }\n        else if (newPerson.name === '') {\n          window.alert (\"Name cannot be empty\")\n        }\n        else{\n          setPersons(persons.concat(newPerson))\n          service.uploadNewPerson(newPerson)\n          setStatus({\n            statusText:`Added ${newPerson.name}`,\n            statusType:`success`\n          })\n          setNewName('')\n          setNewNumber('')\n          \n        }\n      }\n\n    return (\n        <>\n        <form onSubmit={addPerson}>\n        <div>\n          name: <input \n          value={newName}\n          onChange={newNameHandler}\n          />\n          <div>\n            number: <input\n            value={newNumber}\n            onChange={newNumberHandler} \n            />\n          </div>\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n      <div>debug: {newName}</div>\n    </>\n    )\n}\n\nconst updateNumber = ({existingPerson,newPerson,states,stateSetters,existingPersonIndex}) => {\n  const updatedPerson = {...existingPerson,number:newPerson.number}\n  const {persons} = states\n  const {setStatus,setPersons} = stateSetters;\n  service\n  .replaceNumber(existingPerson.id,updatedPerson)\n  .then(response => {\n    console.log(`${response.data.name}'s number updated`)\n    const personsUpdated = [...persons]\n    personsUpdated.splice(existingPersonIndex,1)  //should have used filter instead\n    setPersons(personsUpdated.concat(response.data))\n    setStatus({\n      statusText:`${response.data.name}'s number updated`,\n      statusType:`success`\n    })\n  })\n  .catch(response => {\n    console.log(response.data)\n    setStatus({\n      statusText:`${updatedPerson.name} has been removed from the server.`,\n      statusType:`failure`\n    })\n  })\n}\n\n\nexport default AddNew","import React from 'react'\nimport service from \"../services/jsonServerRequests\";\n\n\n\n\n\nconst DeletePersonButton = ({name, states, stateSetters}) =>{\n    const { persons } = states\n    const { setPersons } = stateSetters\n    const deleteButtonClicked = ({target}) => {\n        if (window.confirm(`Confirm delete ${target.value}?`)){\n        const newPersons = [...persons]\n        const personID = \n        newPersons\n            .splice(newPersons\n            .findIndex(person=> person.name ===target.value) , 1)[0]\n            .id\n        \n        service.deletePerson(personID)\n        .then((response) => {\n            console.log(`Deleted ${response.name}`)\n            setPersons(newPersons)\n        })\n        }\n        \n    }\n\n    return(\n        <>\n            <button value={name} onClick={deleteButtonClicked}>delete</button>\n            </>\n    )\n}\n\nexport default DeletePersonButton\n","import React from 'react';\n\nconst StatusMessage = ({status,setStatus}) => {\n    const {statusText, statusType} = status\n    if(statusText) {\n    setTimeout(() => setStatus({}),5000)\n    return (\n        <div style={statusStyleSelector(statusType)}>\n            {statusText}\n        </div>\n    )\n    }\n    else return null\n    \n}\n\nconst statusStyles = {\n    success: {\n        color: 'green',\n        background: 'lightgrey',\n        fontSize: 20,\n        borderStyle: 'solid',\n        borderRadius: 5,\n        padding: 10,\n        marginBottom: 10,\n    },\n    failure: {\n        color: 'red',\n        background: 'lightgrey',\n        fontSize: 20,\n        borderStyle: 'solid',\n        borderRadius: 5,\n        padding: 10,\n        marginBottom: 10,       \n    }\n}\n\n\n\nconst statusStyleSelector = statusType => {\n    return statusStyles[statusType]\n}\n\nexport default StatusMessage","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport AddNew from './components/AddNew'\nimport DeletePersonButton from \"./components/DeletePerson\";\nimport axios from 'axios'\nimport StatusMessage from './components/StatusMessage'\nimport jsonServerRequests from './services/jsonServerRequests';\n\nconst App = () => {\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ searchName, setSearchName ] = useState('')\n  const [ persons, setPersons ] = useState([]) \n  const [ status , setStatus ] = useState({})\n\n  \n  const states = {newName, newNumber, searchName, persons, status}\n  const stateSetters = {setNewName, setNewNumber, setSearchName, setPersons, setStatus}\n\n  const newTextHandler = (inputName,setter) => {\n    return (event) => {\n      const newValue = event.target.value\n      console.log(inputName,\" \",newValue)\n      setter(newValue)\n    }\n  }\n  const searchHandler = newTextHandler(\"Search Name\",setSearchName)\n  useEffect(() => {\n    jsonServerRequests.getPersons().then(resp => setPersons(resp))\n  }\n  ,[status])\n\n  \n\n \n  \n\n\n\n  let filteredPersons = [...persons]\n  if(searchName !=='') {\n    \n    const searchString = searchName.toUpperCase()\n    console.log(\"Searching term: \", searchString)\n    console.log(persons[0].name.toUpperCase().startsWith(searchString))\n    filteredPersons = filteredPersons.filter(person => person.name.toUpperCase().startsWith(searchString))\n  }\n  \n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n        <StatusMessage status={status} setStatus={setStatus} />\n        <Filter searchName={searchName} handler={searchHandler} />\n      <h2>Add a new</h2>\n        <AddNew states={states} stateSetters={stateSetters} newTextHandler={newTextHandler} />\n      <h2>Numbers</h2>\n      {filteredPersons.map(person =>\n      <div key={person.name}>\n        {person.name} {person.number}\n        <DeletePersonButton name={person.name} states={states} stateSetters={stateSetters} />\n        <br />\n      </div>)}\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}