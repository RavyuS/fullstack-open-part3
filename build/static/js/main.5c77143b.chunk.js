(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{18:function(e,t,n){e.exports=n(40)},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(17),o=n.n(s),c=n(2),u=n(4),l=function(e){var t=e.searchName,n=e.handler;return r.a.createElement("p",null,"Filter: ",r.a.createElement("input",{value:t,onChange:n}))},i=n(7),m=n(3),d=n.n(m),p=function(e){return d.a.post("".concat("/api","/persons"),e)},b=function(e){return console.log("Deleting ".concat(e,"...")),d.a.delete("".concat("/api","/persons/").concat(e))},f=function(e,t){return d.a.put("".concat("/api","/persons/").concat(e),t)},g=function(){return d.a.get("".concat("/api","/persons")).then((function(e){return e.data}))},h=function(e){var t=e.existingPerson,n=e.newPerson,a=e.states,r=e.stateSetters,s=e.existingPersonIndex,o=Object(i.a)(Object(i.a)({},t),{},{number:n.number}),u=a.persons,l=r.setStatus,m=r.setPersons;f(t.id,o).then((function(e){console.log("".concat(e.data.name,"'s number updated"));var t=Object(c.a)(u);t.splice(s,1),m(t.concat(e.data)),l({statusText:"".concat(e.data.name,"'s number updated"),statusType:"success"})})).catch((function(e){console.log(e.response),l({statusText:e.response.data,statusType:"failure"})}))},v=function(e){var t=e.states,n=e.stateSetters,a=e.newTextHandler,s=t.newName,o=t.newNumber,c=t.persons,u=n.setNewName,l=n.setNewNumber,i=n.setPersons,m=n.setStatus,d=a("Name",u),b=a("Number",l);return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a={name:s,number:o},r=c.findIndex((function(e){return e.name===a.name})),d=c[r];console.log(d),d?(window.confirm("".concat(a.name," already exists in phonebook, would you like to update number from \n            ").concat(d.number," to ").concat(a.number,"? "))&&h({existingPerson:d,newPerson:a,states:t,stateSetters:n,existingPersonIndex:r}),u(""),l("")):""===a.name?window.alert("Name cannot be empty"):(i(c.concat(a)),p(a).then((function(e){m({statusText:"Added ".concat(e.data.name),statusType:"success"}),u(""),l("")})).catch((function(e){console.log(e.response),m({statusText:e.response.data,statusType:"failure"})})))}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:s,onChange:d}),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:o,onChange:b}))),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))),r.a.createElement("div",null,"debug: ",s))},E=function(e){var t=e.name,n=e.states,a=e.stateSetters,s=n.persons,o=a.setPersons;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{value:t,onClick:function(e){var t=e.target;if(window.confirm("Confirm delete ".concat(t.value,"?"))){var n=Object(c.a)(s),a=n.splice(n.findIndex((function(e){return e.name===t.value})),1)[0].id;b(a).then((function(e){console.log("Deleted ".concat(e.name)),o(n)}))}}},"delete"))},S={success:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},failure:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}},w=function(e){return S[e]},N=function(e){var t=e.status,n=e.setStatus,a=t.statusText,s=t.statusType;return a?(setTimeout((function(){return n({})}),5e3),r.a.createElement("div",{style:w(s)},a)):null},x=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],s=t[1],o=Object(a.useState)(""),i=Object(u.a)(o,2),m=i[0],d=i[1],p=Object(a.useState)(""),b=Object(u.a)(p,2),f=b[0],h=b[1],S=Object(a.useState)([]),w=Object(u.a)(S,2),x=w[0],j=w[1],y=Object(a.useState)({}),O=Object(u.a)(y,2),T=O[0],k=O[1],P={newName:n,newNumber:m,searchName:f,persons:x,status:T},C={setNewName:s,setNewNumber:d,setSearchName:h,setPersons:j,setStatus:k},I=function(e,t){return function(n){var a=n.target.value;console.log(e," ",a),t(a)}},B=I("Search Name",h);Object(a.useEffect)((function(){g().then((function(e){return j(e)}))}),[T]);var D=Object(c.a)(x);if(""!==f){var F=f.toUpperCase();console.log("Searching term: ",F),console.log(x[0].name.toUpperCase().startsWith(F)),D=D.filter((function(e){return e.name.toUpperCase().startsWith(F)}))}return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(N,{status:T,setStatus:k}),r.a.createElement(l,{searchName:f,handler:B}),r.a.createElement("h2",null,"Add a new"),r.a.createElement(v,{states:P,stateSetters:C,newTextHandler:I}),r.a.createElement("h2",null,"Numbers"),D.map((function(e){return r.a.createElement("div",{key:e.name},e.name," ",e.number,r.a.createElement(E,{name:e.name,states:P,stateSetters:C}),r.a.createElement("br",null))})))};o.a.render(r.a.createElement(x,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.5c77143b.chunk.js.map